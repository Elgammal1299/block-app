# ุชูููุฐ ุงูุฃูุถุงุน ุงูุฌุงูุฒุฉ (Focus Modes) - ุงููุฑุญูุฉ ุงูุฃููู โ

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชูููุฐ **ุงููุฑุญูุฉ ุงูุฃููู** ุจุงููุงูู ูู ุฎุทุฉ ุชุทููุฑ ุงูุฃูุถุงุน ุงูุฌุงูุฒุฉ. ุงูุฃูุถุงุน ุงูุขู ูุชุตูุฉ ุจูุธุงู ุงูุญุธุฑ ุงููุนูู ูุน ููุงุฆู ุชุทุจููุงุช ุฐููุฉ ูุฅููุงููุฉ ุชุฎุตูุต ูุงููุฉ.

---

## โ ูุง ุชู ุชูููุฐู

### 1. ุงูุจููุฉ ุงูุชุญุชูุฉ ุงูุฃุณุงุณูุฉ

#### ููุงุฐุฌ ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ:
- **FocusModeConfig** ([lib/feature/data/models/focus_mode_config.dart](lib/feature/data/models/focus_mode_config.dart))
  - ุชุฎุฒูู ุฅุนุฏุงุฏุงุช ูู ูุถุน
  - ุงููุฏุฉ ุงููุฎุตุตุฉุ ุงูุฅุนุฏุงุฏุงุช ุงูุฅุถุงููุฉุ Pomodoro (ูููุณุชูุจู)
  - ุนูุงูุฉ `isCustomized` ูุชุชุจุน ุงูุชุฎุตูุตุงุช

- **FocusModeSchedule** ([lib/feature/data/models/focus_mode_schedule.dart](lib/feature/data/models/focus_mode_schedule.dart))
  - ุฌุฏููุฉ ุงูุฃูุถุงุน (ุฌุงูุฒ ูููุฑุญูุฉ 3)
  - ููุช ุงูุจุฏุกุ ุฃูุงู ุงูุฃุณุจูุนุ ุจุฏุก ุชููุงุฆู

- **FocusModePresets** ([lib/feature/data/models/focus_mode_presets.dart](lib/feature/data/models/focus_mode_presets.dart))
  - ููุงุฆู ุฐููุฉ ุจูุงุกู ุนูู ูุฆุงุช ุงูุชุทุจููุงุช
  - ูู ูุถุน ูู ูุงุฆูุฉ ุงูุชุฑุงุถูุฉ ููุงุณุจุฉ:
    - **ูุถุน ุงูุฏุฑุงุณุฉ**: ูุญุธุฑ Social Media, Games, Entertainment, Shopping
    - **ูุถุน ุงูุนูู**: ูุญุธุฑ Games, Entertainment, Social
    - **ูุถุน ุงูููู**: ูุณูุญ ููุท ุจุงูููุจู ูุงููุงุชู
    - **ููุช ูููุณู**: ูุญุธุฑ Productivity, News
    - **ุงูุนูู ุงูุนููู**: ูุญุธุฑ ุชูุฑูุจุงู ูู ุดูุก

#### ุทุจูุฉ ุงูุจูุงูุงุช (Repository):
- **FocusModeConfigRepository** ([lib/feature/data/repositories/focus_mode_config_repository.dart](lib/feature/data/repositories/focus_mode_config_repository.dart))
  - `initializePresets()`: ุฅูุดุงุก ููุงุฆู ุฐููุฉ ููู ูุถุน ุนูุฏ ุฃูู ุงุณุชุฎุฏุงู
  - `customizeModeApps()`: ุชุฎุตูุต ุงูุชุทุจููุงุช ุงููุญุธูุฑุฉ
  - `resetModeToDefault()`: ุฅุนุงุฏุฉ ุชุนููู ููุฅุนุฏุงุฏุงุช ุงูุฃุตููุฉ
  - `getBlockedAppsCount()`: ุนุฏุฏ ุงูุชุทุจููุงุช ุงููุญุธูุฑุฉ
  - `getFocusListForMode()`: ุงูุญุตูู ุนูู ูุงุฆูุฉ ุงูุชุทุจููุงุช

#### ุฅุฏุงุฑุฉ ุงูุญุงูุฉ (State Management):
- **FocusModeConfigCubit** ([lib/feature/ui/view_model/focus_mode_config_cubit/focus_mode_config_cubit.dart](lib/feature/ui/view_model/focus_mode_config_cubit/focus_mode_config_cubit.dart))
  - ุชุญููู ุงูุฅุนุฏุงุฏุงุช
  - ุชุญุฏูุซ ุงูุชุฎุตูุตุงุช
  - ุญูุธ ุงูุชุบููุฑุงุช

#### ุงูุชุฎุฒูู ุงููุญูู:
- ุชู ุชุญุฏูุซ **SharedPrefsService** ([lib/feature/data/local/shared_prefs_service.dart](lib/feature/data/local/shared_prefs_service.dart))
  - `getFocusModeConfigs()`, `saveFocusModeConfig()`, `updateFocusModeConfig()`
  - ุญูุธ ูุงุณุชุฑุฌุงุน ุงูุฅุนุฏุงุฏุงุช ุจุตูุบุฉ JSON

### 2. ูุงุฌูุงุช ุงููุณุชุฎุฏู

#### ุดุงุดุฉ ุงุฎุชูุงุฑ ุงูุชุทุจููุงุช:
- **FocusModeAppSelectionScreen** ([lib/feature/ui/view/screens/focus_mode_app_selection_screen.dart](lib/feature/ui/view/screens/focus_mode_app_selection_screen.dart))
  - ุนุฑุถ ุงูุชุทุจููุงุช ุงููุญุฏุฏุฉ ูุณุจูุงู
  - ุจุญุซ ูู ุงูุชุทุจููุงุช
  - ุชุตููุฉ ุญุณุจ ุงููุฆุฉ (AppCategoryFilter)
  - ุฅุฎูุงุก/ุฅุธูุงุฑ ุชุทุจููุงุช ุงููุธุงู
  - ุญูุธ ุงูุชุฎุตูุตุงุช

#### ุชุญุฏูุซ ุดุงุดุฉ ุชูุงุตูู ุงููุถุน:
- **QuickModeDetailsScreen** ([lib/feature/ui/view/screens/quick_mode_details_screen.dart](lib/feature/ui/view/screens/quick_mode_details_screen.dart))
  - โ ุฅุตูุงุญ ุฏุงูุฉ `_startFocusMode()` - ุงูุขู ุชุจุฏุฃ ุฌูุณุฉ ุญููููุฉ
  - ุนุฑุถ ุนุฏุฏ ุงูุชุทุจููุงุช ุงููุญุธูุฑุฉ
  - ุงูุชููู ูุดุงุดุฉ ุงุฎุชูุงุฑ ุงูุชุทุจููุงุช
  - ุญูุธ ุงูุชุฎุตูุตุงุช ุชููุงุฆูุงู

### 3. ุงูุชูุงูู ุงููุงูู

#### Dependency Injection:
- ุชุณุฌูู `FocusModeConfigRepository` ู `FocusModeConfigCubit` ูู GetIt ([lib/core/DI/setup_get_it.dart](lib/core/DI/setup_get_it.dart))

#### ุงูุชููุฆุฉ ุงูุชููุงุฆูุฉ:
- ุนูุฏ ุจุฏุก ุงูุชุทุจูู ([lib/main.dart](lib/main.dart))
  - ุงูุชุญูู ูู ุงูุชููุฆุฉ
  - ุฅูุดุงุก ุงูููุงุฆู ุงูุฐููุฉ ุชููุงุฆูุงู
  - ุชุญููู ุงูุฅุนุฏุงุฏุงุช

#### Routing:
- ุฅุถุงูุฉ routes ุฌุฏูุฏุฉ ([lib/core/router/app_routes.dart](lib/core/router/app_routes.dart), [lib/core/router/route.dart](lib/core/router/route.dart))
  - `/quick-mode-details`
  - `/focus-mode-app-selection`

---

## ๐ฏ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุฃูู ุงุณุชุฎุฏุงู (ุงูุชููุฆุฉ ุงูุชููุงุฆูุฉ)
ุนูุฏ ูุชุญ ุงูุชุทุจูู ูุฃูู ูุฑุฉ ุจุนุฏ ุงูุชุญุฏูุซ:
- ุณูุชู ุชุญููู ุงูุชุทุจููุงุช ุงููุซุจุชุฉ ุชููุงุฆูุงู
- ุณูุชู ุฅูุดุงุก ููุงุฆู ุฐููุฉ ููู ูุถุน ุญุณุจ ุงููุฆุงุช
- ูุง ูุญุชุงุฌ ุงููุณุชุฎุฏู ูุฃู ุฅุฌุฑุงุก ูุฏูู

### 2. ุจุฏุก ูุถุน ุฌุงูุฒ
1. ุงูุชุญ ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ (Enhanced Home Screen)
2. ุงุถุบุท ุนูู ุฃุญุฏ ุงูุฃูุถุงุน ุงูุฌุงูุฒุฉ (ูุซุงู: ูุถุน ุงูุฏุฑุงุณุฉ)
3. ูู ุดุงุดุฉ ุงูุชูุงุตูู:
   - **ุนุฏุฏ ุงูุชุทุจููุงุช**: ูุธูุฑ ุชููุงุฆูุงู "ูุญุฏุฏุฉ: X ุชุทุจูู"
   - **ุชุฎุตูุต ุงููุงุฆูุฉ**: ุงุถุบุท ุนูู "ูุงุฆูุฉ ุงูุญุธุฑ" ูุชุฎุตูุต ุงูุชุทุจููุงุช
   - **ุงููุฏุฉ**: ุนุฏูู ุงููุฏุฉ ุญุณุจ ุงูุญุงุฌุฉ
   - **ุงูุฅุนุฏุงุฏุงุช ุงูุฅุถุงููุฉ**: ูุนูู/ุนุทูู ุญุณุจ ุงูุญุงุฌุฉ
4. ุงุถุบุท "ุจุฏุก" - ุณูุจุฏุฃ ุงูุญุธุฑ ููุฑุงู

### 3. ุชุฎุตูุต ุงูุชุทุจููุงุช
1. ูู ุดุงุดุฉ ุชูุงุตูู ุงููุถุนุ ุงุถุบุท ุนูู "ูุงุฆูุฉ ุงูุญุธุฑ"
2. ุดุงุดุฉ ุงุฎุชูุงุฑ ุงูุชุทุจููุงุช ุณุชูุชุญ:
   - ุงูุชุทุจููุงุช ุงููุญุฏุฏุฉ ูุณุจูุงู ุณุชุธูุฑ ูุญุฏุฏุฉ (โ)
   - ุงุณุชุฎุฏู ุงูุจุญุซ ููุนุซูุฑ ุนูู ุชุทุจูู ูุนูู
   - ุงุณุชุฎุฏู ุงูููุชุฑ ุญุณุจ ุงููุฆุฉ (Social, Games, ุฅูุฎ)
   - ูุนูู "ุนุฑุถ ุชุทุจููุงุช ุงููุธุงู" ูุฑุคูุฉ ุชุทุจููุงุช ุงููุธุงู
3. ุงุฎุชุฑ/ุฃูุบู ุงุฎุชูุงุฑ ุงูุชุทุจููุงุช
4. ุงุถุบุท "ุญูุธ (X ุชุทุจูู)"
5. ุณูุนูุฏ ููุดุงุดุฉ ุงูุณุงุจูุฉ ูุน ุนุฏุฏ ูุญุฏุซ

### 4. ุฅุนุงุฏุฉ ุงูุชุนููู ููุฅุนุฏุงุฏุงุช ุงูุฃุตููุฉ (ูุฑูุจุงู)
- ุณูุชู ุฅุถุงูุฉ ุฒุฑ "ุฅุนุงุฏุฉ ุชุนููู" ูู ุงููุฑุญูุฉ ุงูุซุงููุฉ
- ุณูุนูุฏ ุงููุงุฆูุฉ ุงูุฐููุฉ ุงูุฃุตููุฉ

---

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ

```
lib/feature/
โโโ data/
โ   โโโ models/
โ   โ   โโโ focus_mode_config.dart          โ ุฌุฏูุฏ
โ   โ   โโโ focus_mode_schedule.dart        โ ุฌุฏูุฏ
โ   โ   โโโ focus_mode_presets.dart         โ ุฌุฏูุฏ
โ   โโโ repositories/
โ       โโโ focus_mode_config_repository.dart โ ุฌุฏูุฏ
โโโ ui/
โ   โโโ view/
โ   โ   โโโ screens/
โ   โ       โโโ focus_mode_app_selection_screen.dart โ ุฌุฏูุฏ
โ   โโโ view_model/
โ       โโโ focus_mode_config_cubit/
โ           โโโ focus_mode_config_cubit.dart  โ ุฌุฏูุฏ
โ           โโโ focus_mode_config_state.dart  โ ุฌุฏูุฏ
```

---

## ๐ง ุงููููุงุช ุงููุนุฏููุฉ

```
lib/
โโโ main.dart                               ๐ง ุฅุถุงูุฉ ุชููุฆุฉ ุงูุฃูุถุงุน
โโโ core/
โ   โโโ constants/app_constants.dart        ๐ง ุฅุถุงูุฉ keyFocusModeConfigs
โ   โโโ DI/setup_get_it.dart                ๐ง ุชุณุฌูู Repository ู Cubit
โ   โโโ router/
โ       โโโ app_routes.dart                 ๐ง ุฅุถุงูุฉ routes ุฌุฏูุฏุฉ
โ       โโโ route.dart                      ๐ง ุฅุถุงูุฉ route handlers
โโโ feature/
    โโโ data/
    โ   โโโ local/
    โ       โโโ shared_prefs_service.dart   ๐ง ุฅุถุงูุฉ ุญูุธ/ุชุญููู configs
    โโโ ui/
        โโโ view/
            โโโ screens/
                โโโ quick_mode_details_screen.dart ๐ง ุฅุตูุงุญ _startFocusMode
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑุงุช ูุฏููุฉ ููุตู ุจูุง:

#### 1. ุงูุชููุฆุฉ ุงูุฃููู:
```bash
# ุญุฐู ุงูุจูุงูุงุช ุงููุฎุฒูุฉ (ุงุฎุชูุงุฑู ููุงุฎุชุจุงุฑ)
flutter run
# ุชุญูู ูู ุงูุณุฌู (logs):
# - "Focus mode presets initialized successfully!"
# - ุนุฏุฏ ุงูุชุทุจููุงุช ููู ูุถุน
```

#### 2. ุจุฏุก ูุถุน:
- ุงูุชุญ ุฃู ูุถุน โ ุงุถุบุท "ุจุฏุก"
- ุชุญูู ูู:
  - ุงูุงูุชูุงู ููุดุงุดุฉ ุงูุฑุฆูุณูุฉ
  - ุธููุฑ ุฑุณุงูุฉ ูุฌุงุญ "ุจุฏุฃ [ุงุณู ุงููุถุน] ุจูุฌุงุญ โ"
  - ุฌูุณุฉ ูุดุทุฉ ูู `FocusSessionCubit`

#### 3. ุชุฎุตูุต ุงูุชุทุจููุงุช:
- ุงูุชุญ ูุถุน ุงูุฏุฑุงุณุฉ
- ุงุถุบุท "ูุงุฆูุฉ ุงูุญุธุฑ"
- ุฅุฒุงูุฉ/ุฅุถุงูุฉ ุชุทุจููุงุช
- ุงุญูุธ
- ุชุญูู ูู:
  - ุนุฏุฏ ุงูุชุทุจููุงุช ูุญุฏุซ ูู ุดุงุดุฉ ุงูุชูุงุตูู
  - `isCustomized = true` ูู ุงูุฅุนุฏุงุฏุงุช

#### 4. ุงูุจุญุซ ูุงูุชุตููุฉ:
- ูู ุดุงุดุฉ ุงุฎุชูุงุฑ ุงูุชุทุจููุงุช:
  - ุงุจุญุซ ุนู ุชุทุจูู ูุนูู
  - ุงุณุชุฎุฏู ููุชุฑ ุงููุฆุงุช
  - ูุนูู/ุนุทูู ุชุทุจููุงุช ุงููุธุงู
- ุชุญูู ูู ุนูู ุงูููุงุชุฑ ุจุดูู ุตุญูุญ

---

## ๐ ูุนูุงุฑูุฉ ุงููุธุงู

```
FocusModeType (Enum)
    โ
FocusModeConfig (ุชูุถููุงุช ุงููุณุชุฎุฏู)
    โ
FocusList (ูุงุฆูุฉ ุงูุชุทุจููุงุช)
    โ
FocusSession (ุงูุฌูุณุฉ ุงููุดุทุฉ)
    โ
Native Android (ุงูุญุธุฑ ุงููุนูู)
```

### ุชุฏูู ุงูุจูุงูุงุช:
1. **ุงูุชููุฆุฉ**:
   - App Start โ `initializePresets()` โ ุฅูุดุงุก FocusList ููู ูุถุน โ ุฅูุดุงุก FocusModeConfig

2. **ุงูุชุฎุตูุต**:
   - User selects apps โ `customizeModeApps()` โ ุฅูุดุงุก FocusList ุฌุฏูุฏุฉ โ ุชุญุฏูุซ Config

3. **ุงูุจุฏุก**:
   - User presses "ุจุฏุก" โ `_startFocusMode()` โ `FocusSessionCubit.startSession()` โ Native blocking

---

## ๐ ุงููุฑุงุญู ุงููุงุฏูุฉ

### ุงููุฑุญูุฉ 2: ุงูุญูุธ ูุงูุชุฎุตูุต (ุงูุฃููููุฉ ุงููุชูุณุทุฉ)
- [ ] ูุงุฌูุฉ ุฅุนุงุฏุฉ ุงูุชุนููู ููุฅุนุฏุงุฏุงุช ุงูุฃุตููุฉ
- [ ] ูุคุดุฑุงุช ุงูุชุฎุตูุต ุนูู ุงูุจุทุงูุงุช
- [ ] ุญูุธ ุฅุนุฏุงุฏุงุช Pomodoro ูุงูุฅุนุฏุงุฏุงุช ุงูุฅุถุงููุฉ

### ุงููุฑุญูุฉ 3: ุงูููุฒุงุช ุงููุชูุฏูุฉ (ุงูุฃููููุฉ ุงูููุฎูุถุฉ)
- [ ] ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ (WorkManager)
- [ ] ุชูุงูู Pomodoro (ุงุณุชุฑุงุญุงุช ุชููุงุฆูุฉ)
- [ ] ุงูุงูุชุฑุงุญุงุช ุงูุฐููุฉ ุงููุญุณููุฉ

---

## ๐ ูุนูููุงุช ุงูุชุตุญูุญ

### Logs ูููุฉ:
- `"Focus mode presets initialized successfully!"` - ุงูุชููุฆุฉ ูุฌุญุช
- `"Creating preset for [mode]: X apps"` - ุฅูุดุงุก preset ููู ูุถุน
- `"Failed to create custom focus list"` - ูุดู ุงูุชุฎุตูุต

### SharedPreferences Keys:
- `focus_presets_initialized_v2`: ุงูุชุญูู ูู ุงูุชููุฆุฉ
- `focus_mode_configs`: ุงูุฅุนุฏุงุฏุงุช ุงููุญููุธุฉ
- `focus_lists`: ููุงุฆู ุงูุชุทุจููุงุช

### ุชูุธูู ุงูุจูุงูุงุช ููุงุฎุชุจุงุฑ:
```dart
// ูู Developer Options ุฃู ุนุจุฑ ุงูููุฏ
await SharedPreferences.getInstance().then((prefs) {
  prefs.remove('focus_presets_initialized_v2');
  prefs.remove('focus_mode_configs');
});
```

---

## โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

โ **ููุงุฆู ุฐููุฉ**: ุชููุดุฃ ุชููุงุฆูุงู ุจูุงุกู ุนูู ูุฆุงุช ุงูุชุทุจููุงุช
โ **ุชุฎุตูุต ูุงูู**: ุงููุณุชุฎุฏู ููููู ุชุนุฏูู ุฃู ูุงุฆูุฉ
โ **ุญูุธ ุงูุชุฎุตูุตุงุช**: ุงูุฅุนุฏุงุฏุงุช ุชูุญูุธ ุชููุงุฆูุงู
โ **ุจุฏุก ูุนูู**: ุงูุฃูุถุงุน ูุชุตูุฉ ุจูุธุงู ุงูุญุธุฑ ุงูุญูููู
โ **ูุงุฌูุฉ ุณููุฉ**: ุจุญุซุ ุชุตููุฉุ ุนุฏ ุชููุงุฆู
โ **ูุนูุงุฑูุฉ ูุธููุฉ**: Repository Pattern + BLoC + DI
โ **ุฌุงูุฒ ููุชูุณุน**: ุฏุนู Pomodoro ูุงูุฌุฏููุฉ ุฌุงูุฒ ูููุฑุญูุฉ 3

---

## ๐ ููุงุญุธุงุช ูููุทูุฑูู

### ุงููุตู ุจูู Preset ู Custom:
- **Preset Lists**: IDs ุจุตูุบุฉ `preset_study`, `preset_work`
- **Custom Lists**: IDs ุจุตูุบุฉ `study_custom_1234567890`
- ุงูููุงุฆู ุงูุฃุตููุฉ ุชูุญูุธ ููุฑุฌูุน ุฅูููุง ุนูุฏ Reset

### ุนุฏู ุฅุฒุนุงุฌ ุงููุณุชุฎุฏููู ุงูุญุงูููู:
- ุงูุชููุฆุฉ ุชุชู ูุฑุฉ ูุงุญุฏุฉ ููุท
- ุงูููุงุฆู ุงููุฎุตุตุฉ ุงูููุฌูุฏุฉ ูุง ุชูุญุฐู
- `focus_presets_initialized_v2` ูููุน ุงูุชููุฆุฉ ุงูููุฑุฑุฉ

### ุงูุชุนุงูู ูุน ุงูุฃุฎุทุงุก:
- ุฅุฐุง ูุดูุช ุงูุชููุฆุฉุ ุงูุชุทุจูู ูุนูู ุจุดูู ุทุจูุนู
- ุงูููุงุฆู ุงููุงุฑุบุฉ ุชูููุน ูู ุงูุญูุธ
- ุฑุณุงุฆู ูุงุถุญุฉ ูููุณุชุฎุฏู ูู ุญุงูุฉ ุงููุดู

---

## ๐ ุงูุฎูุงุตุฉ

ุงููุฑุญูุฉ ุงูุฃููู ููุชููุฉ ุจูุฌุงุญ! ุงูุฃูุถุงุน ุงูุฌุงูุฒุฉ ุงูุขู:
- โ **ูุธูููุฉ ุจุงููุงูู** - ุชุญุธุฑ ุงูุชุทุจููุงุช ูุนููุงู
- โ **ุฐููุฉ** - ุชุฎุชุงุฑ ุงูุชุทุจููุงุช ุงูููุงุณุจุฉ ุชููุงุฆูุงู
- โ **ูุงุจูุฉ ููุชุฎุตูุต** - ุงููุณุชุฎุฏู ูุชุญูู ุจูู ุดูุก
- โ **ูุชูุงููุฉ** - ุชุนูู ูุน ูู ุงููุธุงู ุจุณูุงุณุฉ

**ุงูุชุทุจูู ุฌุงูุฒ ููุงุฎุชุจุงุฑ!** ๐

---

*ุขุฎุฑ ุชุญุฏูุซ: 2025-12-23*
